fecha <- datos$Fecha[i]
datos_nuevo$CO2_ppm[datos_nuevo$Fecha == fecha] <-
datos$CO2_ppm[datos$Fecha == fecha]
}
#Quiero aprovechar los datos desestacionalizados pero solamente estan en el
#archivo con datos mensuales, entonces voy a seleccionar el periodo
#Enero 1984 - Diciembre 2022, recorto esos datos que me interesan y los pego
#en los diarios
#Agrego en "datos" una columna con los datos desestacionalizados
Desestacionalizado = c()
for (i in 1:length(anios1)) {
anio = anios1[i]
datos_anio = datos_nuevo[datos_nuevo$Anio == anio,]
datos_anio1 = datos1[datos1$year == anio,]
for (j in 1:length(meses1)) {
datos_mes = datos_anio[datos_anio$Mes == j,]
datos_mes1 = datos_anio1[datos_anio1$month == j,]
desestacionalizado_mes = seq(datos_mes1$deseasonalized,
datos_mes1$deseasonalized,
length.out = length(datos_mes$CO2_ppm))
Desestacionalizado = c(Desestacionalizado, desestacionalizado_mes)
}
} #Creo un vector con los datos desestacionalizados pero repetidos la cantidad
#Agrego a mis datos la columna con los datos desestacionalizados
datos_nuevo = cbind(datos_nuevo, Desestacionalizado)
#Selecciono los datos de 2020 a 2021 para armar el grafico solicitado
datos_covid <- datos_nuevo[datos_nuevo$Anio %in% 2020:2021,]
#Calculo los promedios mensuales y semanales
#PROMEDIO MENSUAL
anios_covid <- c(2020:2021)
media_mensual_covid = c()
for (i in 1:length(anios_covid)) {
for (j in 1:length(meses1)) {
anio <- anios_covid[i]
datos_anio <- datos_covid[datos_covid$Anio == anio,]
datos_mes <- datos_anio[datos_anio$Mes == j,]
media_mes <- round(mean(datos_mes$CO2_ppm, na.rm = T),2)
media_mensual_covid <- c(media_mensual_covid, media_mes)
}
}
#PROMEDIO SEMANAL
media_semanal_covid = c()
for (i in 1:length(anios_covid)) {
for (j in 1:length(meses1)) {
anio <- anios_covid[i]
datos_anio <- datos_covid[datos_covid$Anio == anio,]
datos_mes <- datos_anio[datos_anio$Mes == j,]
for (k in seq(1,31,8)) {
semana <- datos_mes[datos_mes$Dia %in% k:(k+7),]
media_semanal <- round(mean(semana$CO2_ppm, na.rm = T), 2)
media_semanal_covid <- c(media_semanal_covid, media_semanal)
}
}
}
#Agrego las medias al data frame
datos_covid$Media_mensual <- 0
datos_covid$Media_semanal <- 0
k <- 0
for (i in 1:length(anios_covid)) {
anio <- anios_covid[i]
for (j in 1:length(meses1)) {
datos_covid$Media_mensual[
datos_covid$Anio == anio & datos_covid$Mes == j] <-
media_mensual_covid[j+k*12]
}
k <- k + 1
}
sec <- seq(1,31,8)
h <- 0
for (i in 1:length(anios_covid)) {
anio <- anios_covid[i]
for (j in 1:length(meses1)) {
for (k in 1:length(sec)) {
dia <- sec[k]
datos_covid$Media_semanal[
datos_covid$Anio == anio & datos_covid$Mes == j &
datos_covid$Dia %in% dia:(dia+7)] <- media_semanal_covid[k+h*4]
}
h <- h + 1
}
}
#Armo el grafico pedido con ggplot #####geom_ribbon()
require(ggplot2)
datos_covid$Etiqueta <- month(datos_covid$Mes,label = T)
datos_covid$Etiqueta[which(datos_covid$Dia != 15)] <- NA
datos_covid$Media_corrida <- datos_covid$Media_mensual + 0.2
g <- ggplot(data = datos_covid, mapping = aes(x = Fecha, y = CO2_ppm)) +
geom_point(color = "gray45") +
scale_x_date(date_breaks = "2 month", date_labels = "%Y-%m") +
geom_point(mapping = aes(x = Fecha, y = Media_semanal), shape = 0,
fill = "darkviolet", color = "darkviolet", size = 0.8) +
geom_point(mapping = aes(x = Fecha, y = Media_mensual),
shape = 0, fill = "darkblue", color = "darkblue", size = 0.8) +
geom_text(datos_covid,
mapping = aes(label = Etiqueta, x = Fecha, y = Media_corrida),
color = "#0000CD")
g
g <- ggplot(data = datos_covid, mapping = aes(x = Fecha, y = CO2_ppm)) +
geom_point(color = "black", fill = "grey45") +
scale_x_date(date_breaks = "2 month", date_labels = "%Y-%m") +
geom_point(mapping = aes(x = Fecha, y = Media_semanal), shape = 0,
fill = "darkviolet", color = "darkviolet", size = 0.8) +
geom_point(mapping = aes(x = Fecha, y = Media_mensual),
shape = 0, fill = "darkblue", color = "darkblue", size = 0.8) +
geom_text(datos_covid,
mapping = aes(label = Etiqueta, x = Fecha, y = Media_corrida),
color = "#0000CD")
g
g <- ggplot(data = datos_covid, mapping = aes(x = Fecha, y = CO2_ppm)) +
geom_point(color = "grey45") +
scale_x_date(date_breaks = "2 month", date_labels = "%Y-%m") +
geom_point(mapping = aes(x = Fecha, y = Media_semanal), shape = 0,
fill = "darkviolet", color = "darkviolet", size = 0.8) +
geom_point(mapping = aes(x = Fecha, y = Media_mensual),
shape = 0, fill = "darkblue", color = "darkblue", size = 0.8) +
geom_text(datos_covid,
mapping = aes(label = Etiqueta, x = Fecha, y = Media_corrida),
color = "#0000CD")
g
g <- ggplot(data = datos_covid, mapping = aes(x = Fecha, y = CO2_ppm)) +
geom_point(color = "grey45") +
scale_x_date(date_breaks = "2 month", date_labels = "%Y-%m") +
geom_point(mapping = aes(x = Fecha, y = Media_semanal), shape = 0,
fill = "darkviolet", color = "darkviolet", size = 0.8) +
geom_point(mapping = aes(x = Fecha, y = Media_mensual),
shape = 0, fill = "darkblue", color = "darkblue", size = 0.8) +
geom_text(datos_covid,
mapping = aes(label = Etiqueta, x = Fecha, y = Media_corrida),
color = "blue4")
g
g <- ggplot(data = datos_covid, mapping = aes(x = Fecha, y = CO2_ppm)) +
geom_point(color = "grey45") +
scale_x_date(date_breaks = "2 month", date_labels = "%Y-%m") +
geom_point(mapping = aes(x = Fecha, y = Media_semanal), shape = 0,
fill = "darkviolet", color = "darkviolet", size = 0.8) +
geom_point(mapping = aes(x = Fecha, y = Media_mensual),
shape = 0, fill = "darkblue", color = "darkblue", size = 0.8) +
geom_text(datos_covid,
mapping = aes(label = Etiqueta, x = Fecha, y = Media_corrida),
color = "blue4", size = 1)
g
g <- ggplot(data = datos_covid, mapping = aes(x = Fecha, y = CO2_ppm)) +
geom_point(color = "grey45") +
scale_x_date(date_breaks = "2 month", date_labels = "%Y-%m") +
geom_point(mapping = aes(x = Fecha, y = Media_semanal), shape = 0,
fill = "darkviolet", color = "darkviolet", size = 0.8) +
geom_point(mapping = aes(x = Fecha, y = Media_mensual),
shape = 0, fill = "darkblue", color = "darkblue", size = 0.8) +
geom_text(datos_covid,
mapping = aes(label = Etiqueta, x = Fecha, y = Media_corrida),
color = "blue4", size = 2)
g
g <- ggplot(data = datos_covid, mapping = aes(x = Fecha, y = CO2_ppm)) +
geom_point(color = "grey45") +
scale_x_date(date_breaks = "2 month", date_labels = "%Y-%m") +
geom_point(mapping = aes(x = Fecha, y = Media_semanal), shape = 0,
fill = "darkviolet", color = "darkviolet", size = 0.8) +
geom_point(mapping = aes(x = Fecha, y = Media_mensual),
shape = 0, fill = "darkblue", color = "darkblue", size = 0.8) +
geom_text(datos_covid,
mapping = aes(label = Etiqueta, x = Fecha, y = Media_corrida),
color = "blue4")
g
g <- ggplot(data = datos_covid, mapping = aes(x = Fecha, y = CO2_ppm)) +
geom_point(color = "grey45") +
scale_x_date(date_breaks = "2 month", date_labels = "%Y-%m") +
geom_point(mapping = aes(x = Fecha, y = Media_semanal), shape = 0,
fill = "darkviolet", color = "darkviolet", size = 0.8) +
geom_point(mapping = aes(x = Fecha, y = Media_mensual),
shape = 0, fill = "darkblue", color = "darkblue", size = 0.8) +
geom_text(datos_covid,
mapping = aes(label = Etiqueta, x = Fecha, y = Media_corrida),
color = "#000080")
g
g <- ggplot(data = datos_covid, mapping = aes(x = Fecha, y = CO2_ppm)) +
geom_point(color = "grey45") +
scale_x_date(date_breaks = "2 month", date_labels = "%Y-%m") +
geom_point(mapping = aes(x = Fecha, y = Media_semanal), shape = 0,
fill = "darkviolet", color = "darkviolet", size = 0.8) +
geom_point(mapping = aes(x = Fecha, y = Media_mensual),
shape = 0, fill = "darkblue", color = "darkblue", size = 0.8) +
geom_text(datos_covid,
mapping = aes(label = Etiqueta, x = Fecha, y = Media_corrida),
color = "#191970")
g
g <- ggplot(data = datos_covid, mapping = aes(x = Fecha, y = CO2_ppm)) +
geom_point(color = "grey45") +
scale_x_date(date_breaks = "2 month", date_labels = "%Y-%m") +
geom_point(mapping = aes(x = Fecha, y = Media_semanal), shape = 0,
fill = "darkviolet", color = "darkviolet", size = 0.8) +
geom_point(mapping = aes(x = Fecha, y = Media_mensual),
shape = 0, fill = "darkblue", color = "darkblue", size = 0.8) +
geom_text(datos_covid,
mapping = aes(label = Etiqueta, x = Fecha, y = Media_corrida),
color = "#191970", cex = 1.5)
g
View(datos_covid)
datos_covid$Etiqueta <- month(datos_covid$Mes,label = T)
datos_covid$Etiqueta[which(datos_covid$Dia != 15)] <- NA
datos_covid$Media_corrida <- datos_covid$Media_mensual + 0.2
g <- ggplot(data = datos_covid, mapping = aes(x = Fecha, y = CO2_ppm)) +
geom_point(color = "grey45") +
scale_x_date(date_breaks = "2 month", date_labels = "%Y-%m") +
geom_point(mapping = aes(x = Fecha, y = Media_semanal), shape = 0,
fill = "darkviolet", color = "darkviolet", size = 0.8) +
geom_point(mapping = aes(x = Fecha, y = Media_mensual),
shape = 0, fill = "darkblue", color = "darkblue", size = 0.8) +
geom_text(datos_covid,
mapping = aes(label = Etiqueta, x = Fecha, y = Media_corrida),
color = "#191970", cex = 1.5)
g
g <- ggplot(data = datos_covid, mapping = aes(x = Fecha, y = CO2_ppm)) +
geom_point(color = "grey45") +
scale_x_date(date_breaks = "2 month", date_labels = "%Y-%m") +
geom_point(mapping = aes(x = Fecha, y = Media_semanal), shape = 0,
fill = "darkviolet", color = "darkviolet", size = 0.8) +
geom_point(mapping = aes(x = Fecha, y = Media_mensual),
shape = 0, fill = "darkblue", color = "darkblue", size = 0.8) +
geom_text(datos_covid,
mapping = aes(label = Etiqueta, x = Fecha, y = Media_corrida),
color = "#191970", cex = 10)
g
g <- ggplot(data = datos_covid, mapping = aes(x = Fecha, y = CO2_ppm)) +
geom_point(color = "grey45") +
scale_x_date(date_breaks = "2 month", date_labels = "%Y-%m") +
geom_point(mapping = aes(x = Fecha, y = Media_semanal), shape = 0,
fill = "darkviolet", color = "darkviolet", size = 0.8) +
geom_point(mapping = aes(x = Fecha, y = Media_mensual),
shape = 0, fill = "darkblue", color = "darkblue", size = 0.8) +
geom_text(datos_covid,
mapping = aes(label = Etiqueta, x = Fecha, y = Media_corrida),
color = "#191970", cex = 5)
g
g <- ggplot(data = datos_covid, mapping = aes(x = Fecha, y = CO2_ppm)) +
geom_point(color = "grey45") +
scale_x_date(date_breaks = "2 month", date_labels = "%Y-%m") +
geom_point(mapping = aes(x = Fecha, y = Media_semanal), shape = 0,
fill = "darkviolet", color = "darkviolet", size = 0.8) +
geom_point(mapping = aes(x = Fecha, y = Media_mensual),
shape = 0, fill = "darkblue", color = "darkblue", size = 0.8) +
geom_text(datos_covid,
mapping = aes(label = Etiqueta, x = Fecha, y = Media_corrida),
color = "#191970", cex = 6)
g
g <- ggplot(data = datos_covid, mapping = aes(x = Fecha, y = CO2_ppm)) +
geom_point(color = "grey45") +
scale_x_date(date_breaks = "2 month", date_labels = "%Y-%m") +
geom_point(mapping = aes(x = Fecha, y = Media_semanal), shape = 0,
fill = "darkviolet", color = "darkviolet", size = 0.8) +
geom_point(mapping = aes(x = Fecha, y = Media_mensual),
shape = 0, fill = "darkblue", color = "darkblue", size = 0.8) +
geom_text(datos_covid,
mapping = aes(label = Etiqueta, x = Fecha, y = Media_corrida),
color = "#191970", cex = 6, font = 1)
g
g <- ggplot(data = datos_covid, mapping = aes(x = Fecha, y = CO2_ppm)) +
geom_point(color = "grey45") +
scale_x_date(date_breaks = "2 month", date_labels = "%Y-%m") +
geom_point(mapping = aes(x = Fecha, y = Media_semanal), shape = 0,
fill = "darkviolet", color = "darkviolet", size = 0.8) +
geom_point(mapping = aes(x = Fecha, y = Media_mensual),
shape = 0, fill = "darkblue", color = "darkblue", size = 0.8) +
geom_text(datos_covid,
mapping = aes(label = Etiqueta, x = Fecha, y = Media_corrida),
color = "#191970", cex = 6, font = 2)
g
g <- ggplot(data = datos_covid, mapping = aes(x = Fecha, y = CO2_ppm)) +
geom_point(color = "grey45") +
scale_x_date(date_breaks = "2 month", date_labels = "%Y-%m") +
geom_point(mapping = aes(x = Fecha, y = Media_semanal), shape = 0,
fill = "darkviolet", color = "darkviolet", size = 0.8) +
geom_point(mapping = aes(x = Fecha, y = Media_mensual),
shape = 0, fill = "darkblue", color = "darkblue", size = 0.8) +
geom_text(datos_covid,
mapping = aes(label = Etiqueta, x = Fecha, y = Media_corrida),
color = "#191970", cex = 6, font = 3)
g
g <- ggplot(data = datos_covid, mapping = aes(x = Fecha, y = CO2_ppm)) +
geom_point(color = "grey45") +
scale_x_date(date_breaks = "2 month", date_labels = "%Y-%m") +
geom_point(mapping = aes(x = Fecha, y = Media_semanal), shape = 0,
fill = "darkviolet", color = "darkviolet", size = 0.8) +
geom_point(mapping = aes(x = Fecha, y = Media_mensual),
shape = 0, fill = "darkblue", color = "darkblue", size = 0.8) +
geom_text(datos_covid,
mapping = aes(label = Etiqueta, x = Fecha, y = Media_corrida),
color = "#191970", cex = 6) +
geom_legend(x = "topleft", legend = c("Media mensual", "Media semanal"))
g
leyenda <- data.frame( etiqueta = c("Media mensual", "Media semanal"),
color = c("darkblue", "darkviolet")
)
g <- ggplot(data = datos_covid, mapping = aes(x = Fecha, y = CO2_ppm)) +
geom_point(color = "grey45") +
scale_x_date(date_breaks = "2 month", date_labels = "%Y-%m") +
geom_point(mapping = aes(x = Fecha, y = Media_semanal), shape = 0,
fill = "darkviolet", color = "darkviolet", size = 0.8) +
geom_point(mapping = aes(x = Fecha, y = Media_mensual),
shape = 0, fill = "darkblue", color = "darkblue", size = 0.8) +
geom_text(datos_covid,
mapping = aes(label = Etiqueta, x = Fecha, y = Media_corrida),
color = "#191970", cex = 6) +
annotation_custom(grob = ggplot(leyenda, aes(x = "topleft",
label = etiqueta,
color = color)))
g
View(leyenda)
g <- ggplot(data = datos_covid, mapping = aes(x = Fecha, y = CO2_ppm)) +
geom_point(color = "grey45") +
scale_x_date(date_breaks = "2 month", date_labels = "%Y-%m") +
geom_point(mapping = aes(x = Fecha, y = Media_semanal), shape = 0,
fill = "darkviolet", color = "darkviolet", size = 0.8) +
geom_point(mapping = aes(x = Fecha, y = Media_mensual),
shape = 0, fill = "darkblue", color = "darkblue", size = 0.8) +
geom_text(datos_covid,
mapping = aes(label = Etiqueta, x = Fecha, y = Media_corrida),
color = "#191970", cex = 6) +
annotation_custom(grob = ggplot(leyenda, aes(x = 1, y = 1
label = etiqueta,
g
g <- ggplot(data = datos_covid, mapping = aes(x = Fecha, y = CO2_ppm)) +
geom_point(color = "grey45") +
scale_x_date(date_breaks = "2 month", date_labels = "%Y-%m") +
geom_point(mapping = aes(x = Fecha, y = Media_semanal), shape = 0,
fill = "darkviolet", color = "darkviolet", size = 0.8) +
geom_point(mapping = aes(x = Fecha, y = Media_mensual),
shape = 0, fill = "darkblue", color = "darkblue", size = 0.8) +
geom_text(datos_covid,
mapping = aes(label = Etiqueta, x = Fecha, y = Media_corrida),
color = "#191970", cex = 6) +
annotation_custom(leyenda, aes(x = 1, y = 1, label = etiqueta, color = color))
g
g <- ggplot(data = datos_covid, mapping = aes(x = Fecha, y = CO2_ppm)) +
geom_point(color = "grey45") +
scale_x_date(date_breaks = "2 month", date_labels = "%Y-%m") +
geom_point(mapping = aes(x = Fecha, y = Media_semanal), shape = 0,
fill = "darkviolet", color = "darkviolet", size = 0.8) +
geom_point(mapping = aes(x = Fecha, y = Media_mensual),
shape = 0, fill = "darkblue", color = "darkblue", size = 0.8) +
geom_text(datos_covid,
mapping = aes(label = Etiqueta, x = Fecha, y = Media_corrida),
color = "#191970", cex = 6) +
annotation_custom(grob = ggplot(leyenda, aes(x = 1, y = 1,
label = etiqueta,
color = color)))
g
g <- ggplot(data = datos_covid, mapping = aes(x = Fecha, y = CO2_ppm)) +
geom_point(color = "grey45") +
scale_x_date(date_breaks = "2 month", date_labels = "%Y-%m") +
geom_point(mapping = aes(x = Fecha, y = Media_semanal), shape = 0,
fill = "darkviolet", color = "darkviolet", size = 0.8) +
geom_point(mapping = aes(x = Fecha, y = Media_mensual),
shape = 0, fill = "darkblue", color = "darkblue", size = 0.8) +
geom_text(datos_covid,
mapping = aes(label = Etiqueta, x = Fecha, y = Media_corrida),
color = "#191970", cex = 6)
g
g <- ggplot(data = datos_covid, mapping = aes(x = Fecha, y = CO2_ppm)) +
geom_point(color = "grey45") +
scale_x_date(date_breaks = "1 month", date_labels = "%Y-%m") +
geom_point(mapping = aes(x = Fecha, y = Media_semanal), shape = 0,
fill = "darkviolet", color = "darkviolet", size = 0.8) +
geom_point(mapping = aes(x = Fecha, y = Media_mensual),
shape = 0, fill = "darkblue", color = "darkblue", size = 0.8) +
geom_text(datos_covid,
mapping = aes(label = Etiqueta, x = Fecha, y = Media_corrida),
color = "#191970", cex = 6) +
labs(title = "Mediciones de CO2 durante la pandemia (2020-2021) en
Mauna Loa", x = "Fecha", y = "CO2 (ppm)")
g
g <- ggplot(data = datos_covid, mapping = aes(x = Fecha, y = CO2_ppm)) +
geom_point(color = "grey45") +
scale_x_date(date_breaks = "1 month", date_labels = "%Y-%m") +
geom_point(mapping = aes(x = Fecha, y = Media_semanal), shape = 0,
fill = "darkviolet", color = "darkviolet", size = 0.8) +
geom_point(mapping = aes(x = Fecha, y = Media_mensual),
shape = 0, fill = "darkblue", color = "darkblue", size = 0.8) +
geom_text(datos_covid,
mapping = aes(label = Etiqueta, x = Fecha, y = Media_corrida),
color = "#191970", cex = 6) +
labs(title = "Mediciones de CO2 durante la pandemia (2020-2021) en Mauna Loa",
x = "Fecha", y = "CO2 (ppm)")
g
g <- ggplot(data = datos_covid, mapping = aes(x = Fecha, y = CO2_ppm)) +
geom_point(color = "grey45") +
scale_x_date(date_breaks = "2 month", date_labels = "%Y-%m") +
geom_point(mapping = aes(x = Fecha, y = Media_semanal), shape = 0,
fill = "darkviolet", color = "darkviolet", size = 0.8) +
geom_point(mapping = aes(x = Fecha, y = Media_mensual),
shape = 0, fill = "darkblue", color = "darkblue", size = 0.8) +
geom_text(datos_covid,
mapping = aes(label = Etiqueta, x = Fecha, y = Media_corrida),
color = "#191970", cex = 6) +
labs(title = "Mediciones de CO2 durante la pandemia (2020-2021) en Mauna Loa",
x = "Fecha", y = "CO2 (ppm)")
g
g <- ggplot(data = datos_covid, mapping = aes(x = Fecha, y = CO2_ppm)) +
geom_point(color = "grey45") +
scale_x_date(date_breaks = "2 month", date_labels = "%Y-%m") +
geom_point(mapping = aes(x = Fecha, y = Media_semanal), shape = 0,
fill = "darkviolet", color = "darkviolet", size = 0.8) +
geom_point(mapping = aes(x = Fecha, y = Media_mensual),
shape = 0, fill = "darkblue", color = "darkblue", size = 0.8) +
geom_text(datos_covid,
mapping = aes(label = Etiqueta, x = Fecha, y = Media_corrida),
color = "#191970", cex = 6) +
labs(title = "Mediciones de CO2 durante la pandemia en Mauna Loa",
x = "Fecha", y = "CO2 (ppm)", subtitle = "")
g
g <- ggplot(data = datos_covid, mapping = aes(x = Fecha, y = CO2_ppm)) +
geom_point(color = "grey45") +
scale_x_date(date_breaks = "2 month", date_labels = "%Y-%m") +
geom_point(mapping = aes(x = Fecha, y = Media_semanal), shape = 0,
fill = "darkviolet", color = "darkviolet", size = 0.8) +
geom_point(mapping = aes(x = Fecha, y = Media_mensual),
shape = 0, fill = "darkblue", color = "darkblue", size = 0.8) +
geom_text(datos_covid,
mapping = aes(label = Etiqueta, x = Fecha, y = Media_corrida),
color = "#191970", cex = 6) +
labs(title = "Mediciones de CO2 durante la pandemia en Mauna Loa",
x = "Fecha", y = "CO2 (ppm)",
subtitle = "Medias mensuales (azul) y medias semanales (violeta)")
g
g <- ggplot(data = datos_covid, mapping = aes(x = Fecha, y = CO2_ppm)) +
geom_point(color = "grey45") +
scale_x_date(date_breaks = "2 month", date_labels = "%Y-%m") +
geom_point(mapping = aes(x = Fecha, y = Media_semanal), shape = 0,
fill = "darkviolet", color = "darkviolet", size = 0.8) +
geom_point(mapping = aes(x = Fecha, y = Media_mensual),
shape = 0, fill = "darkblue", color = "darkblue", size = 0.8) +
geom_text(datos_covid,
mapping = aes(label = Etiqueta, x = Fecha, y = Media_corrida),
color = "#191970", cex = 6) +
labs(title = "Mediciones de CO2 durante la pandemia en Mauna Loa",
x = "Fecha", y = "CO2 (ppm)",
subtitle = "Media mensual (azul) y media semanal (violeta)")
g
g <- ggplot(data = datos_covid, mapping = aes(x = Fecha, y = CO2_ppm)) +
geom_point(color = "grey45") +
scale_x_date(date_breaks = "2 month", date_labels = "%Y-%m") +
geom_point(mapping = aes(x = Fecha, y = Media_semanal), shape = 0,
fill = "darkviolet", color = "darkviolet", size = 0.8) +
geom_point(mapping = aes(x = Fecha, y = Media_mensual),
shape = 0, fill = "darkblue", color = "darkblue", size = 0.8) +
geom_text(datos_covid,
mapping = aes(label = Etiqueta, x = Fecha, y = Media_corrida),
color = "#191970", cex = 6) +
labs(title = "Mediciones de CO2 durante la pandemia en Mauna Loa",
x = "Fecha", y = "CO2 (ppm)",
subtitle = "Con medias mensuales (azul) y medias semanales (violeta)")
g
g <- ggplot(data = datos_covid, mapping = aes(x = Fecha, y = CO2_ppm)) +
geom_point(color = "grey45") +
scale_x_date(date_breaks = "2 month", date_labels = "%Y-%m") +
geom_point(mapping = aes(x = Fecha, y = Media_semanal), shape = 0,
fill = "darkviolet", color = "darkviolet", size = 0.8) +
geom_point(mapping = aes(x = Fecha, y = Media_mensual),
shape = 0, fill = "darkblue", color = "darkblue", size = 0.8) +
geom_text(datos_covid,
mapping = aes(label = Etiqueta, x = Fecha, y = Media_corrida),
color = "#191970", cex = 6) +
labs(title = "Mediciones de CO2 durante la pandemia en Mauna Loa",
x = "Fecha", y = "CO2 (ppm)",
subtitle = "Con promedios mensuales (azul) y semanales (violeta)")
g
96/2
#Armo un nuevo df solo con los promedios para guardar en una tabla ascii
anios_tabla <- rep(2020:2021, each = 48)
anios_tabla
96/4
meses_tabla <- rep(1:12, each = 4, times = 24)
meses_tabla <- rep(1:12, each = 4, times = 2)
semanas_tabla <- rep(1:4, times = 24)
df_tabla <- data.frame("Anio" = anios_tabla, "Mes" = meses_tabla,
"Semana" = semanas_tabla)
df_tabla <- data.frame("Anio" = anios_tabla, "Mes" = meses_tabla,
"Semana" = semanas_tabla, "Media mensual" = 0,
"Media semanal" = 0)
rm(leyenda)
View(semana)
View(df_tabla)
#Lleno las columnas de las medias
df_tabla$Media.semanal <- media_semanal_covid
k <- 0
for (i in 1:length(anios_covid)) {
for (j in 1:length(meses1)) {
anio <- anios_covid[i]
df_tabla$Media.mensual[df_tabla$Anio == anio & df_tabla$Mes == j] <-
media_mensual_covid[j+k*12]
}
k <- k + 1
}
media_mensual_covid
View(datos_covid)
#Guardo en una tabla
require(MASS)
write.table(df_tabla, file = "Medias mensuales y semanales de CO2 en pandemia")
setwd("~/PracticasLabo/TP_Final")
write.table(df_tabla, file = "Medias mensuales y semanales de CO2 en pandemia")
write.table(df_tabla, file = "Medias mensuales y semanales de CO2 en pandemia",
sep = ",")
write.matrix(df_tabla, file = "Medias mensuales y semanales de CO2 en pandemia")
write.matrix(df_tabla, file = "Medias mensuales y semanales de CO2 en pandemia",
sep = ",")
write.table(df_tabla, file = "Medias mensuales y semanales de CO2 en pandemia",
col.names = T)
write.table(df_tabla, file = "Medias mensuales y semanales de CO2 en pandemia",
col.names = T, row.names = F)
write.table(df_tabla, file = "Medias mensuales y semanales de CO2 en pandemia",
col.names = T, row.names = F, quote = F)
write.table(df_tabla, file = "Medias mensuales y semanales de CO2 en pandemia",
col.names = T, row.names = F, quote = F)
